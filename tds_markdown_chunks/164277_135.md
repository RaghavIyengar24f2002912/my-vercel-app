https://discourse.onlinedegree.iitm.ac.in/t/164277

<a class="mention" href="/u/joeljeffrey">@JoelJeffrey</a></p><hr>

<h4>23f2004752 (#224)</h4>
<p><a class="mention" href="/u/jivraj">@Jivraj</a> <a class="mention" href="/u/carlton">@carlton</a> sir can you take my doubt in today’s session please , i have successfully run docker server but endpoints are not working…<br/>
<div class="lightbox-wrapper"><a class="lightbox" data-download-href="/uploads/short-url/yO2xtMBVAwea8Bpo3rTBKumTB5U.png?dl=1" href="https://europe1.discourse-cdn.com/flex013/uploads/iitm/original/3X/f/3/f3f203d53c41f1d3c7c214f4904ca32579085bea.png" rel="noopener nofollow ugc" title="Screenshot 2025-02-13 165912"><div class="meta"><svg aria-hidden="true" class="fa d-icon d-icon-far-image svg-icon"><use href="#far-image"></use></svg><span class="filename">Screenshot 2025-02-13 165912</span><span class="informations">1917×1024 124 KB</span><svg aria-hidden="true" class="fa d-icon d-icon-discourse-expand svg-icon"><use href="#discourse-expand"></use></svg></div></a></div><br/>
If anyone have knowledge about this , please help</p><hr>

<h4>22f3002771 (#223)</h4>
<p>i am getting unauthorized error in A9 again and again, i have pasted my code if someone can help please look into this.</p>
<pre><code class="lang-auto"># /// script
# requires-python = "&gt;=3.11"
# dependencies = [
#   "numpy",
#   "httpx",
#   "fastapi",
# ]
# ///


import httpx
import numpy as np
import datetime
import os

from fastapi import HTTPException


now = datetime.datetime.now()

OPENAI_API_KEY = os.environ["AIPROXY_TOKEN"]
OPENAI_API_URL = "http://aiproxy.sanand.workers.dev/openai/v1/embeddings"


# async def get_similarity_from_embeddings(emb1: list[float], emb2: list[float]) -&gt; float:
def get_similarity_from_embeddings(emb1: list[float], emb2: list[float]) -&gt; float:
    # """Calculate cosine similarity between two texts."""
    # emb1 = await embed(text1)
    # emb2 = await embed(text2)
    return float(np.dot(emb1, emb2) / (np.linalg.norm(emb1) * np.linalg.norm(emb2)))


# async def embed_list(text_list: list[str]) -&gt; list[float]:
async def embed_list(text_list: list[str]) -&gt; list[float]:
    OPENAI_API_KEY = os.environ["AIPROXY_TOKEN"]
    OPENAI_API_URL = "http://aiproxy.sanand.workers.dev/openai/v1/embeddings"
    """Get embedding vector for text using OpenAI's API."""
    try:
        async with httpx.AsyncClient() as client:
            # with httpx.AsyncClient() as client:
            response = await client.post(
                # response = httpx.post(
                OPENAI_API_URL,
                headers={"Authorization": f"Bearer {OPENAI_API_KEY}"},
                
                json={"model": "text-embedding-3-small", "input": text_list},
            )
        # print(f'{response.json()["data"][0]["embedding"]}')
        emb_list = [emb["embedding"] for emb in response.json()["data"]]
        print(f"Number of embeddings returned = {len(emb_list)}")
        return emb_list

    except KeyError as e:
        print(f"INSIDE EMBED_LIST IN A9.