https://discourse.onlinedegree.iitm.ac.in/t/164277

This, in turn, causes my code to fail with a <code>KeyError: 'data'</code> because the expected JSON response doesnâ€™t include the <code>"data"</code> key.</p>
<h3><a class="anchor" href="#p-595959-what-ive-tried-1" name="p-595959-what-ive-tried-1"></a>What Iâ€™ve Tried</h3>
<ol>
<li><strong>Token Verification:</strong></li>
</ol>
<ul>
<li>Iâ€™m using the <code>AIPROXY_TOKEN</code> obtained by logging in at <a href="https://aiproxy.sanand.workers.dev/" rel="noopener nofollow ugc">aiproxy.sanand.workers.dev</a> with my IITM email.</li>
<li>The token is passed in the header as follows:</li>
</ul>
<p>python</p>
<p>Copy</p>
<pre><code class="lang-auto">"Authorization": f"Bearer {AIPROXY_TOKEN}"
</code></pre>
<ul>
<li>I added debug prints to confirm that the token is being used correctly (printing the first few characters).</li>
</ul>
<ol start="2">
<li><strong>API Request Details:</strong></li>
</ol>
<ul>
<li>The request includes the correct <code>Content-Type: application/json</code> header.</li>
<li>The payload is set as:</li>
</ul>
<p>json</p>
<p>Copy</p>
<pre><code class="lang-auto">{"model": "text-embedding-3-small", "input": ["Test"]}
</code></pre>
<ul>
<li>Despite this, the response status is consistently 401 Unauthorized.</li>
</ul>
<ol start="3">
<li><strong>Debug Output:</strong><br/>
Hereâ€™s a snippet of the debug output:</li>
</ol>
<p>bash</p>
<p>Copy</p>
<pre><code class="lang-auto">HTTP Request: POST https://aiproxy.sanand.workers.dev/openai/v1/embeddings "HTTP/1.1 401 Unauthorized"
ðŸ”´ A9 failed: 'data'
</code></pre>
<p>This confirms that the issue is with the authentication rather than our processing logic.</p>
<h3><a class="anchor" href="#p-595959-what-i-suspect-2" name="p-595959-what-i-suspect-2"></a>What I Suspect</h3>
<ul>
<li>The token may be invalid, expired, or misconfigured.</li>
<li>There could be changes in the token permissions or endpoint requirements that Iâ€™m not aware of.</li>
<li>Alternatively, there might be an issue on the server side with token validation.</li>
</ul>
<h3><a class="anchor" href="#p-595959-request-for-help-3" name="p-595959-request-for-help-3"></a>Request for Help</h3>
<p>Has anyone else encountered this issue recently?